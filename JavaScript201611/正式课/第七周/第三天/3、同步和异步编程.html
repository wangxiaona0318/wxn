<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>同步和异步编程</title>
</head>
<body>
<script>
    //->同步和异步

    //同步:当前的事情没有做完,其他的事情都不能做
    /*var xhr = new XMLHttpRequest;
     xhr.open('get', 'json/data.json', false);
     xhr.onreadystatechange = function () {
     console.log(xhr.readyState);//->4
     };
     xhr.send(null);*/

    /*var xhr = new XMLHttpRequest;
     xhr.open('get', 'json/data.json', false);
     xhr.send(null);
     xhr.onreadystatechange = function () {
     console.log(xhr.readyState);
     };*/

    //异步:当前的事情没有做完，其它的事情也可以去做
    /*var xhr = new XMLHttpRequest;
     xhr.open('get', 'json/data.json', true);
     xhr.onreadystatechange = function () {
     console.log(xhr.readyState);//->2 3 4
     };
     xhr.send(null);*/

    /*var xhr = new XMLHttpRequest;
     xhr.open('get', 'json/data.json', true);
     xhr.send(null);
     xhr.onreadystatechange = function () {
     console.log(xhr.readyState);//->2 3 4
     };*/

    //AJAX这个任务从SEND开始到状态为4才算结束

    //->JS是单线程的：JS中一次只能干一件事情(不管你是同步还是异步)
    /*var n = 0;
     window.setTimeout(function () {
     n++;
     console.log(n);//->2) 1
     }, 1000);
     console.log(n);//->1) 0*/

    /*var n = 0;
     window.setTimeout(function () {
     n++;
     console.log(n);//->2) 1
     }, 0);//->定时器的等待时间写零也不是立马执行,而是需要等待一个浏览器最小的默认时间(谷歌:5~6ms IE:10ms 建议大家定时器的间隔时间写17ms)
     console.log(n);//->1) 0*/

    /*var time = new Date();
     for (var i = 0; i < 100000000; i++) {

     }
     console.log(new Date() - time); => >=250ms*/

    /*var n = 0;
     window.setTimeout(function () {
     n++;
     console.log(n);
     }, 20);
     for (var i = 0; i < 100000000; i++) {

     }
     console.log(n);*/
    //->虽然定时器规定是20ms后执行，但是到了时间需要看JS中干活的这个人有没有空闲时间，有空闲时间把定时器这件事做了，没有空闲时间定时器给我继续等着，什么时候忙完了，什么时候回来做

    window.setTimeout(function () {
        console.log(1);
    }, 20);
    window.setTimeout(function () {
        console.log(2);
    }, 18);
    window.setTimeout(function () {
        console.log(3);
    }, 25);
    for (var i = 0; i < 100000000; i++) {

    }
    console.log(100);


</script>
</body>
</html>